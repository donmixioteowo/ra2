<!DOCTYPE html>
<html>
<head>
<script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
<script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
<script src="gesture-detector.js"></script>
<script src="gesture-handler.js"></script>
</head>
<body style="margin : 0px; overflow: hidden;">

<a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false; detectionMode:mono_and_matrix; matrixCodeType: 3x3;"
renderer="logarithmicDepthBuffer: true;" vr-mode-ui="enabled: false" gesture-detector 
id="scene">

<a-assets>
<a-asset-item id="modelo" src="amlo_salsa_morena.glb"></a-asset-item>
<a-asset-item id="modelo2" src="corona_extra.glb"></a-asset-item>
<a-asset-item id="modelo3" src="coyote_speaker_texture_redo.glb"></a-asset-item>
<a-asset-item id="modelo4" src="farmacia_guadalajara.glb"></a-asset-item>
<a-asset-item id="modelo5" src="mama_lucha.glb"></a-asset-item>
<a-asset-item id="modelo6" src="mexican_chili.glb"></a-asset-item>
<a-asset-item id="modelo7" src="mexican_starter_pack.glb"></a-asset-item>
<a-asset-item id="modelo8" src="mexico_national_palace_press_conference.glb"></a-asset-item>
<a-asset-item id="modelo9" src="microbus_mexico_df.glb"></a-asset-item>
<a-asset-item id="modelo10" src="oso_bimbo.glb"></a-asset-item>
<a-asset-item id="modelo11" src="peluche_de_dr._simi.glb"></a-asset-item>
<a-asset-item id="modelo12" src="silla_de_plastico_y_caguama.glb"></a-asset-item>
<a-asset-item id="modelo13" src="tacos.glb"></a-asset-item>
<a-asset-item id="modelo14" src="tienda_elektra_y_banco_azteca.glb"></a-asset-item>

<audio id="audio_oxxo" src="audios/desvelado_cursed.MP3" preload="auto"></audio>
<audio id="audio_amlo" src="audios/sitatyr.mp3" preload="auto"></audio>
<audio id="audio_micro" src="audios/paloma_ajena.MP3" preload="auto"></audio>
<audio id="audio_mochila" src="audios/cats_inthecold.MP3" preload="auto"></audio>
<audio id="audio_botarga" src="audios/19_2000.MP3" preload="auto"></audio>


</a-assets>

<a-marker type="barcode" value="11" raycaster="objects: .clickable" emitevents="true"
cursor="fuse: false; rayOrigin: mouse;">
    <a-entity
        gltf-model="#modelo5" scale=".05 .05 .05" rotation="-80 -150 150" position=".5 0 0" class="clickable" gesture-handler 
        sound="src: #audio_botarga; autoplay: false; volume: 1">
    </a-entity>

    <a-entity
        gltf-model="#modelo10" scale=".001 .001 .001" rotation="-80 -150 150" class="clickable" gesture-handler>
    </a-entity>

    <a-entity
        gltf-model="#modelo11" scale=".1 .1 .1" rotation="-80 -150 150" position="-.5 0 0" class="clickable" gesture-handler>
    </a-entity>

</a-marker>

<a-marker type="barcode" value="13" raycaster="objects: .clickable" emitevents="true"
cursor="fuse: false; rayOrigin: mouse;">
    <a-entity
        gltf-model="#modelo8" scale=".3 .3 .3" rotation="-90 90 -90" class="clickable" gesture-handler
        sound="src: #audio_amlo; autoplay: false; volume: 1">
    </a-entity>

    <a-entity
        gltf-model="#modelo" scale="1 1 1" position="0 -0.166 -.1" rotation="-90 0 0" class="clickable" gesture-handler>
    </a-entity>
</a-marker>

<a-marker type="barcode" value="16" raycaster="objects: .clickable" emitevents="true"
cursor="fuse: false; rayOrigin: mouse;">
    <a-entity
        gltf-model="#modelo2" scale=".3 .3 .3" rotation="90 90 -90" position=".3 2 0" class="clickable" gesture-handler
        sound="src: #audio_oxxo; autoplay: false; volume: 1">
    </a-entity>

    <a-entity
        gltf-model="#modelo3" scale=".1 .1 .1" rotation="90 90 -90" position=".2 2 -.1" class="clickable" gesture-handler>
    </a-entity>

    <a-entity
        gltf-model="#modelo12" scale=".1 .1 .1" rotation="90 90 -90" position="0 2 0" class="clickable" gesture-handler>
    </a-entity>

    <a-entity
        gltf-model="#modelo13" scale=".1 .1 .1" position="0 0 0" rotation="0 -90 90" class="clickable" gesture-handler>
    </a-entity>
</a-marker>

<a-marker type="barcode" value="15" raycaster="objects: .clickable" emitevents="true"
cursor="fuse: false; rayOrigin: mouse;">
    <a-entity
        gltf-model="#modelo4" scale=".1 .1 .1" rotation="-90 -60 60" position="-2 -.1 0" class="clickable" gesture-handler
        sound="src: #audio_micro; autoplay: false; volume: 1">
    </a-entity>

    <a-entity
        gltf-model="#modelo9" scale=".1 .1 .1" rotation="20 90 -90" class="clickable" gesture-handler>
    </a-entity>

    <a-entity
        gltf-model="#modelo14" scale=".1 .1 .1" rotation="-90 -60 60" position="0 -.1 0" class="clickable" gesture-handler>
    </a-entity>
</a-marker>

<a-marker type="barcode" value="14" raycaster="objects: .clickable" emitevents="true"
cursor="fuse: false; rayOrigin: mouse;">
    <a-entity
        gltf-model="#modelo6" scale=".08 .08 .08" rotation="0 90 -90" position="-.5 0 0" class="clickable" gesture-handler
        sound="src: #audio_mochila; autoplay: false; volume: 1">
    </a-entity>
    <a-entity
        gltf-model="#modelo7" scale=".01 .01 .01" rotation="0 90 -90" position="0 0 0" class="clickable" gesture-handler>
    </a-entity>
</a-marker>


<a-entity camera></a-entity>
</a-scene>

<script>
    var audio_oxxo = document.getElementById('audio_oxxo');
    var audio_amlo = document.getElementById('audio_amlo');
    var audio_micro = document.getElementById('audio_micro');
    var audio_mochila = document.getElementById('audio_mochila');
    var audio_botarga = document.getElementById('audio_botarga');

   
    document.querySelector('[value="16"]').addEventListener('markerFound', function () {
        audio_oxxo.play();
    });

    
    document.querySelector('[value="16"]').addEventListener('markerLost', function () {
        audio_oxxo.pause();
        audio_oxxo.currentTime = 0; // reiniciar el audio desde el inicio
    });

    
    document.querySelector('[value="13"]').addEventListener('markerFound', function () {
        audio_amlo.play();
    });

  
    document.querySelector('[value="13"]').addEventListener('markerLost', function () {
        audio_amlo.pause();
        audio_amlo.currentTime = 0;
    });

    
    document.querySelector('[value="16"]').addEventListener('markerFound', function () {
        audio_micro.play();
    });

  
    document.querySelector('[value="16"]').addEventListener('markerLost', function () {
        audio_micro.pause();
        audio_micro.currentTime = 0;
    });

    document.querySelector('[value="14"]').addEventListener('markerFound', function () {
        audio_mochila.play();
    });

  
    document.querySelector('[value="14"]').addEventListener('markerLost', function () {
        audio_mochila.pause();
        audio_mochila.currentTime = 0;
    });

    document.querySelector('[value="11"]').addEventListener('markerFound', function () {
        audio_botarga.play();
    });

  
    document.querySelector('[value="11"]').addEventListener('markerLost', function () {
        audio_botarga.pause();
        audio_botarga.currentTime = 0;
    });

</script>

</body>
</html>
